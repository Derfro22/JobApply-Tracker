<%- include('partials/header'); -%>


<div class="createOffer">
    <form>
        <label for="jobTitle">Job Title:</label>
        <input type="text" id="jobTitle" name="jobTitle"><br><br>
    
        <label for="website">Website:</label>
        <input type="text" id="website" name="website"><br><br>
    
        <label for="employerName">Name of Employer:</label>
        <input type="text" id="employerName" name="employerName"><br><br>
    
        <label for="contactEmail">Email of Contact:</label>
        <input type="email" id="contactEmail" name="contactEmail"><br><br>
    
        <label for="contactPhone">Phone Number:</label>
        <input type="tel" id="contactPhone" name="contactPhone"><br><br>
    
        <label for="address">Address:</label>
        <input type="text" id="address" name="address"><br><br>
    
        <label for="type">Type:</label>
        <select id="type" name="type">
            <option value="candidature">Candidature</option>
            <option value="jobOffer">Job Offer</option>
        </select><br><br>
    
        <label for="status">Status:</label>
        <select id="status" name="status">
            <option value="interested">Interested</option>
            <option value="CV Sent">CV sent</option>
            <option value="Negative">Negative</option>
            <option value="Interview">Interview</option>
        </select><br><br>
    
        <label for="comments">Comments:</label>
        <textarea id="comments" name="comments"></textarea><br><br>
    
        <button>SAVE</button>
    </form>
</div>


<script>
    const form = document.getElementById('createOfferForm');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = new FormData(form);
        const data = Object.fromEntries(formData.entries());

        try {
            const res = await fetch('/new-offer', {
                method: 'POST',
                body: JSON.stringify(data),
                headers: { 'Content-type': 'application/json' }
            });
            const result = await res.json();

            if (result.success) {
                location.assign('/dashboard');
            } else {
                console.log(result.errors);
            }
        } catch (err) {
            console.log(err);
        }
    });
</script>

